<!doctype html>
<html lang="fr" x-data="{
					dark: document.documentElement.classList.contains('dark'),
					dyslexic: localStorage.font === 'dyslexic' || false
					}" x-init="$watch('dark', v => {
							document.documentElement.classList.toggle('dark', v);
							localStorage.theme = v ? 'dark' : 'light';
							});
						$watch('dyslexic', v => {
			                  document.documentElement.classList.toggle('font-dyslexic', v);
			                  localStorage.font = v ? 'dyslexic' : 'default';
			              });" :class="{ dark, 'font-dyslexic': dyslexic }">
	<head>
		<meta charset="UTF-8"/>
		<title>
			{% block title %}Mon site
			{% endblock %}
		</title>

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="{{ base_url }}css/style.css"/> {% block head_extra %}{% endblock %}

		<!-- Alpine.JS -->
		<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
		<script>
			(() => {
				const t = localStorage.theme;
				if (t === 'dark') 
				document.documentElement.classList.add('dark');
			})();
		</script>
	</head>
	<body>
		<header>
			<nav class="navbar navbar-expand p-4">
				<div
					class="d-flex align-items-center w-100">
					<!-- Liens de navigation -->
					<div class="d-flex">
						<a href="{{ base_url }}" class="nav-link">Accueil</a>
						<a href="{{ base_url }}contact" class="nav-link ms-4">Contact</a>

						{% if session.user %}
							{% if 1 in session.user.roles %} <!-- Si c'est un admin -->
								<a href="{{ base_url }}AdminBoard" class="nav-link ms-4">AdminBoard</a>
							{% endif %}
							{% if (2 in session.user.roles) or (3 in session.user.roles)  %}
								<a href="{{ base_url }}MesArticles" class="nav-link ms-4">Mes Articles</a>
							{% endif %}
							<a href="{{ base_url }}logout" class="nav-link ms-4">DÃ©connexion</a>
						{% else %}
							<a href="{{ base_url }}auth" class="nav-link ms-4">Connexion</a>
							<a href="{{ base_url }}register" class="nav-link ms-4">Inscription</a>
						{% endif %}

					</div>
					<!-- Bouton thÃ¨me -->
					<button class="btn bg-transparent border-0 ms-auto theme-btn" @click="dark = !dark" aria-label="Basculer le thÃ¨me">
						<span x-show="!dark">ğŸŒ™</span>
						<span x-show="dark">â˜€ï¸</span>
					</button>

					<!-- Bouton police dyslexique -->
					<button class="btn bg-transparent border-0 ms-2 font-btn" @click="dyslexic = !dyslexic" aria-label="Basculer la police">
						<span x-show="!dyslexic">A</span>
						<span x-show="dyslexic">ğŸ…³</span>
					</button>
				</div>
			</nav>

			{% if session.user %}
				<div class="d-flex align-items-center w-100">
					<p>Bienvenue
						{{ session.user.nom_utilisateur }}</p>
				</div>
			{% endif %}
		</header>

		<main>
			{% block content %}{% endblock %}
		</main>

		<footer class="d-flex justify-content-center align-items-center p-5">
			<p class="mb-0">Â© 2025 mon blog | tous les droits rÃ©servÃ©s</p>
		</footer>

		{% block scripts %}{% endblock %}
		<!-- Scripts JS pour bootstrap -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	</body>
</html>
