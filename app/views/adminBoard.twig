{% extends "base.html.twig" %}

{% block title %}
	{{ titre_doc }}
{% endblock %}

{% block content %}
	<h1 class="text-center my-4">{{ titre_page }}</h1>

	<div
		class="row row-cols-1 row-cols-md-3 g-4 mx-5 px-5">
		<!-- Articles Card -->
		<div class="col">
			<div class="card h-100 border-primary border-3">
				<div class="card-body text-center">
					<h5 class="card-title text-primary">Articles</h5>
					<p class="card-text display-4 fw-bold">{{ stats.nbArticles }}</p>
					<p class="text-muted">Total articles publiés ou brouillons</p>
				</div>
			</div>
		</div>

		<!-- Comments Card -->
		<div class="col">
			<div class="card h-100 border-warning border-3">
				<div class="card-body text-center">
					<h5 class="card-title text-warning">Commentaires</h5>
					<p class="card-text display-4 fw-bold">{{ stats.nbCommentaires }}</p>
					<p class="text-muted">En attente de modération</p>
				</div>
			</div>
		</div>

		<!-- Users Card -->
		<div class="col">
			<div class="card h-100 border-success border-3">
				<div class="card-body text-center">
					<h5 class="card-title text-success">Utilisateurs</h5>
					<p class="card-text display-4 fw-bold">{{ stats.nbUtilisateurs }}</p>
					<p class="text-muted">Comptes actifs sur le site</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Tags Stats -->
	<div class="mx-5 px-5 mt-5">
		<h4 class="mb-3">Popularité des Tags</h4>
		<div class="card">
			<div class="card-body">
				<div class="d-flex flex-wrap gap-3">
					{% for tag in tags %}
						<div class="d-flex align-items-center border rounded p-2 px-3">
							<span class="fw-bold me-2 text-muted">{{ tag.nom_tag }}</span>
							<span class="badge bg-primary rounded-pill">{{ tag.article_count }}
								articles</span>
						</div>
					{% else %}
						<p class="text-muted mb-0">Aucun tag trouvé.</p>
					{% endfor %}
				</div>
				<hr class="my-3">
				<form action="{{ base_url }}AdminTag/Add" method="POST" class="d-flex justify-content-end align-items-center gap-2">
					<input type="text" name="tag_name" class="form-control form-control-sm dark-white-input" style="width: 200px;" placeholder="Nouveau tag..." required>
					<button type="submit" class="btn btn-sm btn-success">
						<i class="bi bi-plus-lg"></i>
						Ajouter
					</button>
				</form>
			</div>
		</div>
	</div>

	<div class="text-center my-5">
		<a href="{{ base_url }}activity" class="btn btn-primary btn-lg me-3">Voir le fil d'activité complet</a>
		<a href="{{ base_url }}AdminArticles" class="btn btn-primary btn-lg me-3">Gérer les articles</a>
		<a href="{{ base_url }}AdminComments" class="btn btn-warning btn-lg me-3 position-relative">
			Gérer les commentaires
			{% if stats.nbCommentaires > 0 %}
				<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
					{{ stats.nbCommentaires }}
					<span class="visually-hidden">commentaires en attente</span>
				</span>
			{% endif %}
		</a>
		<a href="{{ base_url }}AdminUsers" class="btn btn-secondary btn-lg">Gérer les utilisateurs</a>
	</div>
{% endblock %}
